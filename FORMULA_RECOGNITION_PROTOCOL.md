# å…¬å¼è¯†åˆ«ä¸¥æ ¼æµç¨‹åè®® (Formula Recognition Protocol)

## æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†**å…¬å¼è¯†åˆ«ã€éªŒè¯å’Œåˆ†æ**çš„ä¸¥æ ¼æµç¨‹ï¼Œç¡®ä¿æ¯ä¸ªå…¬å¼éƒ½èƒ½åƒå›¾è¡¨ä¸€æ ·æ‹¥æœ‰ä¸“é—¨çš„å­sectionåˆ†æã€‚

## é—®é¢˜é™ˆè¿°

å½“å‰ç³»ç»Ÿå­˜åœ¨çš„é—®é¢˜ï¼š
1. âœ… å›¾è¡¨æœ‰ä¸“é—¨çš„æ‰«æå™¨ (`FigureScanner`) é¢„å…ˆè¯†åˆ«
2. âœ… å›¾è¡¨æœ‰éªŒè¯æœºåˆ¶ç¡®ä¿å…¨éƒ¨è¢«åˆ†æ
3. âŒ **å…¬å¼æ²¡æœ‰ç‹¬ç«‹çš„æ‰«æå™¨** - å®Œå…¨ä¾èµ–Architectä»æ–‡æœ¬ä¸­"ä¸»åŠ¨æ‰«æ"
4. âŒ **å…¬å¼æ²¡æœ‰éªŒè¯æœºåˆ¶** - æ— æ³•ç¡®ä¿æ‰€æœ‰å…¬å¼éƒ½è¢«è¯†åˆ«å’Œåˆ†æ

## ç›®æ ‡

å»ºç«‹ä¸å›¾è¡¨å®Œå…¨å¯¹ç­‰çš„å…¬å¼å¤„ç†æµç¨‹ï¼š

```
å›¾è¡¨æµç¨‹ï¼šFigureScanner â†’ å›¾è¡¨æ¸…å• â†’ Architectä½¿ç”¨æ¸…å• â†’ éªŒè¯è¦†ç›–
å…¬å¼æµç¨‹ï¼šEquationScanner â†’ å…¬å¼æ¸…å• â†’ Architectä½¿ç”¨æ¸…å• â†’ éªŒè¯è¦†ç›–  â¬…ï¸ æ–°å¢
```

---

## ä¸‰å±‚æ¶æ„è®¾è®¡

### ç¬¬1å±‚ï¼šå…¬å¼æ‰«æå™¨ (EquationScanner)

#### èŒè´£
åœ¨Markerå¤„ç†å®Œæˆåï¼Œä»markdownæ–‡æœ¬ä¸­æå–æ‰€æœ‰å…¬å¼ã€‚

#### è¾“å…¥
- Markerè½¬æ¢åçš„æ‰€æœ‰é¡µé¢æ–‡æœ¬ (`List[str]`)

#### è¾“å‡º
å…¬å¼æ¸…å• `List[dict]`ï¼Œæ¯ä¸ªæ¡ç›®åŒ…å«ï¼š
```python
{
    "page": int,              # 0-indexedé¡µç 
    "equation_type": str,     # "numbered" | "unnumbered"
    "equation_number": str,   # å¦‚ "1", "2", "1a" (ç¼–å·å…¬å¼) æˆ– None
    "equation_text": str,     # LaTeXå…¬å¼æ–‡æœ¬ (å»é™¤$$ç¬¦å·)
    "context": str,           # å…¬å¼ä¸Šä¸‹æ–‡ (å‰åå„50å­—)
    "description": str        # æè¿°æ€§æ ‡é¢˜ (æ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆ)
}
```

#### è¯†åˆ«è§„åˆ™

**A. ç¼–å·å…¬å¼ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰**
- æ¨¡å¼1ï¼šç‹¬ç«‹ç¼–å· `(1)`, `(2)`, `(1a)` ç­‰
  - å¿…é¡»ä¸ `$$...$$` å…¬å¼åœ¨Â±5è¡Œå†…
  - æå–ç¼–å·ä½œä¸º `equation_number`
  
- æ¨¡å¼2ï¼šæ˜¾å¼å¼•ç”¨ `Equation 1`, `Eq. 2`, `å¼(3)` ç­‰
  - åœ¨æ–‡æœ¬ä¸­æœç´¢è¿™äº›å…³é”®è¯
  - å‘åæŸ¥æ‰¾æœ€è¿‘çš„ `$$...$$` å…¬å¼ï¼ˆ100å­—ç¬¦å†…ï¼‰
  
**B. æœªç¼–å·æ˜¾ç¤ºå…¬å¼ï¼ˆæ¬¡ä¼˜å…ˆï¼‰**
- è¯†åˆ«æ‰€æœ‰ç‹¬ç«‹çš„ `$$...$$` å—
- æ’é™¤å·²åŒ¹é…ä¸ºç¼–å·å…¬å¼çš„éƒ¨åˆ†
- æ ¹æ®ä¸Šä¸‹æ–‡åˆ¤æ–­é‡è¦æ€§ï¼š
  - **é‡è¦**ï¼šé•¿åº¦>20å­—ç¬¦ï¼ŒåŒ…å«å…³é”®ç¬¦å·ï¼ˆâˆ‘, âˆ«, âˆ‚, max, argmax ç­‰ï¼‰
  - **æ¬¡è¦**ï¼šç®€å•èµ‹å€¼ã€å·²çŸ¥å®šä¹‰
  
**C. å†…åµŒå…¬å¼ï¼ˆä¸å•ç‹¬åˆ†æï¼‰**
- `$...$` æ ¼å¼çš„å†…åµŒå…¬å¼ä¸åˆ›å»ºç‹¬ç«‹section
- å®ƒä»¬ä¼šåœ¨ç›¸å…³åˆ†æä¸­è¢«æ¶‰åŠ

#### ä¸Šä¸‹æ–‡æå–

ä¸ºæ¯ä¸ªå…¬å¼æå–ï¼š
- **å‰æ–‡** (50å­—ç¬¦): è¯†åˆ«å…³é”®è¯å¦‚ "where", "å‡è®¾", "å®šä¹‰"
- **åæ–‡** (50å­—ç¬¦): è¯†åˆ«è§£é‡Šæ€§è¯­å¥

#### æè¿°ç”Ÿæˆç­–ç•¥

åŸºäºä¸Šä¸‹æ–‡è‡ªåŠ¨ç”Ÿæˆæè¿°æ€§æ ‡é¢˜ï¼š

| ä¸Šä¸‹æ–‡å…³é”®è¯ | ç”Ÿæˆæ ‡é¢˜æ¨¡æ¿ | ç¤ºä¾‹ |
|------------|------------|------|
| "æŸå¤±", "loss" | "{æ–¹æ³•å}æŸå¤±å‡½æ•°" | "äº¤å‰ç†µæŸå¤±å‡½æ•°" |
| "æ›´æ–°", "update" | "{å‚æ•°}æ›´æ–°è§„åˆ™" | "æƒé‡æ›´æ–°è§„åˆ™" |
| "è´å¶æ–¯", "posterior" | "{æ¦‚å¿µ}è®¡ç®—å…¬å¼" | "åéªŒæ¦‚ç‡è®¡ç®—" |
| "å®šä¹‰", "definition" | "{ç¬¦å·}å®šä¹‰" | "å­¦ä¹ ç‡Î±å®šä¹‰" |
| "ä¼˜åŒ–", "objective" | "ä¼˜åŒ–ç›®æ ‡å‡½æ•°" | "æœ€å°åŒ–ç›®æ ‡å‡½æ•°" |
| æ— æ˜ç¡®å…³é”®è¯ | "ç¬¬{section}éƒ¨åˆ†å…¬å¼" | "ç¬¬3.2èŠ‚æ ¸å¿ƒå…¬å¼" |

#### åˆ†ç»„ç­–ç•¥

**è‡ªåŠ¨åˆ†ç»„è§„åˆ™**ï¼š
- **ç¼–å·å…¬å¼**: è¿ç»­ç¼–å·(å¦‚Eq. 1-3)ä¸”ä¸»é¢˜ç›¸å…³ â†’ åˆå¹¶ä¸ºä¸€ä¸ªsection
- **æœªç¼–å·å…¬å¼**: 1-3ä¸ªåœ¨åŒä¸€æ®µè½/ä¸»é¢˜ä¸‹ â†’ å¯é€‰åˆå¹¶
- **æœ€å¤§åˆ†ç»„æ•°**: 3ä¸ªå…¬å¼/ç»„

---

### ç¬¬2å±‚ï¼šArchitecté›†æˆ

#### è¾“å…¥å¢å¼º

åœ¨Architectçš„system promptä¸­å¢åŠ å…¬å¼æ¸…å•ï¼š

```python
# å½“å‰ï¼ˆä»…å›¾è¡¨ï¼‰
figures_text = "å·²æ£€æµ‹åˆ°çš„å›¾è¡¨æ¸…å•ï¼ˆå¿…é¡»å…¨éƒ¨åˆ†æï¼‰\n- Fig 1...\n- Table 2..."

# æ–°å¢ï¼ˆå›¾è¡¨+å…¬å¼ï¼‰
visual_elements_text = """
## å·²æ£€æµ‹åˆ°çš„è§†è§‰å…ƒç´ æ¸…å•ï¼ˆå¿…é¡»å…¨éƒ¨åˆ†æï¼‰

### å›¾è¡¨ (Figures & Tables)
- ç¬¬3é¡µ: Fig 1a-c: å®éªŒèŒƒå¼
- ç¬¬5é¡µ: Table 1: è¢«è¯•ä¿¡æ¯

### å…¬å¼ (Equations)
ã€ç¼–å·å…¬å¼ã€‘
- ç¬¬4é¡µ: Equation 1-3: logLRè®¡ç®—æ­¥éª¤
- ç¬¬6é¡µ: Equation 4: è´å¶æ–¯æ›´æ–°

ã€é‡è¦çš„æœªç¼–å·å…¬å¼ã€‘
- ç¬¬4é¡µ: æŸå¤±å‡½æ•°å®šä¹‰ ($$L = ...$$ é™„è¿‘)
- ç¬¬7é¡µ: åéªŒæ¦‚ç‡è®¡ç®—

**å¼ºåˆ¶è¦æ±‚**: ä»¥ä¸Šæ‰€æœ‰å…ƒç´ éƒ½å¿…é¡»åœ¨ä½ çš„å¤§çº²ä¸­æœ‰å¯¹åº”sectionï¼
"""
```

#### Promptè°ƒæ•´

æ›´æ–°Architectçš„system promptï¼š

```diff
- ### âš ï¸ ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šå®Œæ•´è¦†ç›–æ‰€æœ‰è§†è§‰å…ƒç´ 
+ ### âš ï¸ ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šå®Œæ•´è¦†ç›–æ‰€æœ‰è§†è§‰å…ƒç´ ï¼ˆå›¾è¡¨+å…¬å¼ï¼‰

  **å¼ºåˆ¶è¦æ±‚**ï¼šåœ¨è®¾è®¡ä»»ä½•é—®é¢˜ä¹‹å‰ï¼Œyou mustï¼š
  1. **å›¾è¡¨æ¸…å•æ ¸æŸ¥**ï¼šæ£€æŸ¥ä¸‹æ–¹æä¾›çš„å›¾è¡¨æ¸…å•...
+ 2. **å…¬å¼æ¸…å•æ ¸æŸ¥**ï¼šæ£€æŸ¥ä¸‹æ–¹æä¾›çš„å…¬å¼æ¸…å•ï¼Œæ¯ä¸€ä¸ªå…¬å¼éƒ½å¿…é¡»æœ‰å¯¹åº”section
- 3. **å…¬å¼å…¨é¢æ‰«æ**ï¼šâš ï¸ é‡è¦ï¼ä½ å¿…é¡»**ä¸»åŠ¨æ‰«ææ–‡æœ¬**å¯»æ‰¾æ‰€æœ‰å…¬å¼...
+ 3. **å…¬å¼è¦†ç›–éªŒè¯**ï¼šä½¿ç”¨æä¾›çš„å…¬å¼æ¸…å•ï¼Œç¡®ä¿æ¯ä¸ªå…¬å¼éƒ½æœ‰section
```

**å…³é”®æ”¹è¿›**ï¼š
- ä»"ä¸»åŠ¨æ‰«æ"ï¼ˆä¸å¯é ï¼‰â†’"æ¸…å•æ ¸æŸ¥"ï¼ˆå¼ºåˆ¶éªŒè¯ï¼‰
- Architectä¸å†éœ€è¦è‡ªå·±è¯†åˆ«å…¬å¼ï¼Œåªéœ€æ ¹æ®æ¸…å•åˆ›å»ºsection

---

### ç¬¬3å±‚ï¼šéªŒè¯ä¸è¡¥å…¨

#### å…¬å¼è¦†ç›–éªŒè¯å‡½æ•°

ç±»ä¼¼äºå›¾è¡¨éªŒè¯ï¼Œæ–°å¢ï¼š

```python
def validate_equation_coverage(
    outline: Outline, 
    equations_list: List[dict]
) -> Outline:
    """
    éªŒè¯outlineæ˜¯å¦è¦†ç›–äº†æ‰€æœ‰æ£€æµ‹åˆ°çš„å…¬å¼
    å¦‚æœç¼ºå¤±ï¼Œè‡ªåŠ¨è¡¥å……
    """
    # æå–å·²æœ‰çš„å…¬å¼section
    equation_sections = [s for s in outline.sections if s.type == 'equation']
    
    # æå–å·²åˆ†æçš„å…¬å¼ç¼–å·/æè¿°
    analyzed_eqs = set()
    for section in equation_sections:
        # ä»æ ‡é¢˜ä¸­æå–å…¬å¼æ ‡è¯†
        eq_id = extract_equation_identifier(section.section_title)
        if eq_id:
            analyzed_eqs.add(eq_id)
    
    # æ£€æµ‹ç¼ºå¤±çš„å…¬å¼
    missing_eqs = []
    for eq in equations_list:
        eq_id = eq.get('equation_number') or eq.get('description')
        if eq_id and eq_id not in analyzed_eqs:
            missing_eqs.append(eq)
    
    # è‡ªåŠ¨è¡¥å……ç¼ºå¤±çš„å…¬å¼section
    if missing_eqs:
        print(f"âš ï¸  æ£€æµ‹åˆ°{len(missing_eqs)}ä¸ªæœªåˆ†æçš„å…¬å¼ï¼Œè‡ªåŠ¨è¡¥å……...")
        for eq in missing_eqs:
            è¡¥å……section = create_equation_section(eq)
            outline.sections.append(è¡¥å……section)
            print(f"  ğŸ”§ è¡¥å……: {è¡¥å……section.section_title}")
    else:
        print(f"âœ… æ‰€æœ‰æ£€æµ‹åˆ°çš„å…¬å¼éƒ½æœ‰å¯¹åº”åˆ†æsection")
    
    return outline
```

#### ä¼˜å…ˆé—®é¢˜éªŒè¯ï¼ˆå·²å­˜åœ¨ï¼‰

`validate_and_fix_priority_questions()` å·²ç»æ”¯æŒå…¬å¼ï¼Œç¡®ä¿æ¯ä¸ªequation sectionéƒ½æœ‰ï¼š
1. **é—®é¢˜1 (what)**: æ•°å­¦è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆï¼Ÿå„ç¬¦å·ä»£è¡¨ä»€ä¹ˆï¼Ÿ
2. **é—®é¢˜2 (principle)**: æ¨å¯¼é€»è¾‘å’Œè®¡ç®—åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

---

## å®Œæ•´å·¥ä½œæµç¨‹

```mermaid
graph TD
    A[PDFæ–‡ä»¶] --> B[Markeré€é¡µè½¬æ¢]
    B --> C[æ‰€æœ‰é¡µé¢æ–‡æœ¬ List<str>]
    
    C --> D[FigureScanner æ‰«æå›¾è¡¨]
    C --> E[EquationScanner æ‰«æå…¬å¼]
    
    D --> F[å›¾è¡¨æ¸…å• List<dict>]
    E --> G[å…¬å¼æ¸…å• List<dict>]
    
    F --> H[åˆå¹¶ä¸ºè§†è§‰å…ƒç´ æ¸…å•]
    G --> H
    
    H --> I[Architect åˆ†æ‰¹ç”Ÿæˆå¤§çº²]
    C --> I
    
    I --> J[æ‰¹æ¬¡1 sections]
    I --> K[æ‰¹æ¬¡2 sections]
    I --> L[...]
    
    J --> M[åˆå¹¶æ‰€æœ‰sections]
    K --> M
    L --> M
    
    M --> N[æ™ºèƒ½å»é‡]
    N --> O[éªŒè¯å…¬å¼è¦†ç›– validate_equation_coverage]
    O --> P[éªŒè¯ä¼˜å…ˆé—®é¢˜ validate_and_fix_priority_questions]
    
    P --> Q[âœ… æœ€ç»ˆOutline - å›¾è¡¨å’Œå…¬å¼å…¨éƒ¨è¦†ç›–]
```

---

## å®æ–½è®¡åˆ’

### é˜¶æ®µ1ï¼šåˆ›å»ºEquationScanner

**æ–‡ä»¶**: `analyze_paper.py`

**æ–°å¢ç±»** (å‚è€ƒFigureScanner):
```python
class EquationScanner:
    """æ‰«æMarkerè¾“å‡ºä¸­çš„æ‰€æœ‰å…¬å¼"""
    
    def __init__(self, all_pages_text: List[str]):
        self.all_pages_text = all_pages_text
    
    def scan_all_equations(self) -> List[dict]:
        """
        æ‰«ææ‰€æœ‰é¡µé¢è¯†åˆ«å…¬å¼
        è¿”å›: [{"page": int, "equation_type": str, ...}, ...]
        """
        equations = []
        
        for page_num, page_text in enumerate(self.all_pages_text):
            # 1. è¯†åˆ«ç¼–å·å…¬å¼
            numbered_eqs = self._extract_numbered_equations(page_text, page_num)
            equations.extend(numbered_eqs)
            
            # 2. è¯†åˆ«é‡è¦çš„æœªç¼–å·æ˜¾ç¤ºå…¬å¼
            unnumbered_eqs = self._extract_unnumbered_equations(
                page_text, page_num, numbered_eqs
            )
            equations.extend(unnumbered_eqs)
        
        return equations
    
    def _extract_numbered_equations(self, text: str, page_num: int) -> List[dict]:
        """æå–ç¼–å·å…¬å¼"""
        # å®ç°ç¼–å·è¯†åˆ«é€»è¾‘
        ...
    
    def _extract_unnumbered_equations(
        self, text: str, page_num: int, 
        exclude_numbered: List[dict]
    ) -> List[dict]:
        """æå–æœªç¼–å·ä½†é‡è¦çš„æ˜¾ç¤ºå…¬å¼"""
        # å®ç°æœªç¼–å·å…¬å¼ç­›é€‰é€»è¾‘
        ...
```

### é˜¶æ®µ2ï¼šé›†æˆåˆ°mainæµç¨‹

**ä½ç½®**: `main()` å‡½æ•°ï¼Œç¬¬1269è¡Œé™„è¿‘

```python
# å½“å‰ä»£ç 
print("ğŸ“Š å›¾è¡¨æ‰«æ: æ­£åœ¨è¯†åˆ«PDFä¸­çš„æ‰€æœ‰å›¾è¡¨...")
figure_scanner = FigureScanner(str(pdf_path))
figures_list = figure_scanner.scan_all_figures()
figure_scanner.close()
print(f"âœ… æ£€æµ‹åˆ° {len(figures_list)} ä¸ªå›¾è¡¨/è¡¨æ ¼")

# æ–°å¢
print("ğŸ”¢ å…¬å¼æ‰«æ: æ­£åœ¨è¯†åˆ«Markerè¾“å‡ºä¸­çš„æ‰€æœ‰å…¬å¼...")
equation_scanner = EquationScanner(all_pages_text)
equations_list = equation_scanner.scan_all_equations()
print(f"âœ… æ£€æµ‹åˆ° {len(equations_list)} ä¸ªå…¬å¼")
print(f"   - ç¼–å·å…¬å¼: {sum(1 for eq in equations_list if eq['equation_type'] == 'numbered')}")
print(f"   - é‡è¦æœªç¼–å·å…¬å¼: {sum(1 for eq in equations_list if eq['equation_type'] == 'unnumbered')}")
```

### é˜¶æ®µ3ï¼šæ›´æ–°Architect prompt

**ä½ç½®**: `ArchitectAgent.generate_outline()` æ–¹æ³•

```python
# æ„å»ºè§†è§‰å…ƒç´ æ¸…å•æ–‡æœ¬ï¼ˆåˆå¹¶å›¾è¡¨å’Œå…¬å¼ï¼‰
visual_elements_text = ""

if figures_list:
    visual_elements_text += "\n\n## å·²æ£€æµ‹åˆ°çš„å›¾è¡¨æ¸…å•\n"
    for fig in figures_list:
        visual_elements_text += f"- ç¬¬{fig['page']+1}é¡µ: {fig['caption']}\n"

if equations_list:  # æ–°å¢
    visual_elements_text += "\n\n## å·²æ£€æµ‹åˆ°çš„å…¬å¼æ¸…å•\n"
    visual_elements_text += "### ç¼–å·å…¬å¼\n"
    for eq in [e for e in equations_list if e['equation_type'] == 'numbered']:
        visual_elements_text += f"- ç¬¬{eq['page']+1}é¡µ: Equation {eq['equation_number']}: {eq['description']}\n"
    
    visual_elements_text += "\n### é‡è¦çš„æœªç¼–å·å…¬å¼\n"
    for eq in [e for e in equations_list if e['equation_type'] == 'unnumbered']:
        visual_elements_text += f"- ç¬¬{eq['page']+1}é¡µ: {eq['description']}\n"

if visual_elements_text:
    visual_elements_text += "\n**é‡è¦**: ä»¥ä¸Šæ‰€æœ‰å›¾è¡¨å’Œå…¬å¼éƒ½å¿…é¡»åœ¨ä½ çš„åˆ†æå¤§çº²ä¸­ä½“ç°ã€‚\n"
```

### é˜¶æ®µ4ï¼šæ·»åŠ éªŒè¯å‡½æ•°

**ä½ç½®**: `main()` å‡½æ•°ï¼ŒéªŒè¯ç¯èŠ‚

```python
# å½“å‰éªŒè¯æµç¨‹
unique_sections = deduplicate_sections(all_sections, figures_list)
temp_outline = Outline(...)

# æ–°å¢å…¬å¼è¦†ç›–éªŒè¯
temp_outline = validate_equation_coverage(temp_outline, equations_list)

# ç°æœ‰ä¼˜å…ˆé—®é¢˜éªŒè¯ï¼ˆå·²æ”¯æŒå…¬å¼ï¼‰
outline = validate_and_fix_priority_questions(temp_outline, figures_list)
```

---

## é¢„æœŸæ•ˆæœ

### æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹

```
ğŸ“Š å›¾è¡¨æ‰«æ: æ­£åœ¨è¯†åˆ«PDFä¸­çš„æ‰€æœ‰å›¾è¡¨...
âœ… æ£€æµ‹åˆ° 12 ä¸ªå›¾è¡¨/è¡¨æ ¼

ğŸ”¢ å…¬å¼æ‰«æ: æ­£åœ¨è¯†åˆ«Markerè¾“å‡ºä¸­çš„æ‰€æœ‰å…¬å¼...
âœ… æ£€æµ‹åˆ° 18 ä¸ªå…¬å¼
   - ç¼–å·å…¬å¼: 8
   - é‡è¦æœªç¼–å·å…¬å¼: 10

æ¶æ„å¸ˆ: æ­£åœ¨åˆ†æ‰¹ç”Ÿæˆæ·±åº¦é˜…è¯»å¤§çº²...
ğŸ“š å…±23é¡µï¼Œå°†åˆ†5æ‰¹å¤„ç†ï¼ˆæ¯æ‰¹5é¡µï¼‰
...

ğŸ”§ å»é‡å®Œæˆ: ç§»é™¤äº†3ä¸ªé‡å¤sectionï¼Œä¿ç•™48ä¸ªå”¯ä¸€section

ğŸ“Š å›¾è¡¨è¦†ç›–éªŒè¯: æ£€æµ‹åˆ°12ä¸ªå›¾è¡¨ï¼Œç”Ÿæˆäº†12ä¸ªå›¾è¡¨åˆ†æsection
âœ… æ‰€æœ‰æ£€æµ‹åˆ°çš„å›¾è¡¨éƒ½æœ‰å¯¹åº”åˆ†æsection

ğŸ”¢ å…¬å¼è¦†ç›–éªŒè¯: æ£€æµ‹åˆ°18ä¸ªå…¬å¼ï¼Œç”Ÿæˆäº†15ä¸ªå…¬å¼åˆ†æsection
âš ï¸  æ£€æµ‹åˆ°3ä¸ªæœªåˆ†æçš„å…¬å¼ï¼Œè‡ªåŠ¨è¡¥å……...
  ğŸ”§ è¡¥å……: 3.2.4 æ— åä¼°è®¡é‡å®šä¹‰
  ğŸ”§ è¡¥å……: 4.1.3 ç½®ä¿¡åŒºé—´è®¡ç®—
  ğŸ”§ è¡¥å……: é™„å½•A.2 æ¨å¯¼æ­¥éª¤2
âœ… å…¬å¼è¦†ç›–éªŒè¯å®Œæˆ

âœ… ä¼˜å…ˆé—®é¢˜éªŒè¯é€šè¿‡: æ‰€æœ‰figure/equation sectionéƒ½åŒ…å«'æ˜¯ä»€ä¹ˆ'å’Œ'åŸç†'ä¸¤ä¸ªä¼˜å…ˆé—®é¢˜
```

### Outlineç»“æ„ç¤ºä¾‹

```
3. å®éªŒè®¾è®¡ (Methods)
â”œâ”€ 3.1 å®éªŒèŒƒå¼ä¸åˆºæ¿€
â”‚  â”œâ”€ 3.1.1 Fig 1a-c: ä»»åŠ¡èŒƒå¼ä¸‰æ¡ä»¶ âœ…
â”‚  â””â”€ 3.1.2 Fig 2: åˆºæ¿€ææ–™ç¤ºä¾‹ âœ…
â”œâ”€ 3.2 ç†è®ºæ¡†æ¶ä¸å…¬å¼
â”‚  â”œâ”€ 3.2.1 Equation 1-3: logLRè®¡ç®—æ­¥éª¤ âœ…
â”‚  â”œâ”€ 3.2.2 è´å¶æ–¯æ›´æ–°å…¬å¼ âœ… (æœªç¼–å·ä½†é‡è¦)
â”‚  â”œâ”€ 3.2.3 æŸå¤±å‡½æ•°å®šä¹‰ âœ… (æœªç¼–å·ä½†é‡è¦)
â”‚  â””â”€ 3.2.4 æ— åä¼°è®¡é‡å®šä¹‰ ğŸ”§ (è‡ªåŠ¨è¡¥å……)
â””â”€ 3.3 æ•°æ®æ”¶é›†æµç¨‹

4. ç»“æœ (Results)
â”œâ”€ 4.1 è¡Œä¸ºæ•°æ®åˆ†æ
â”‚  â”œâ”€ 4.1.1 Fig 3a-d: å‡†ç¡®ç‡åˆ†ç»„å¯¹æ¯” âœ…
â”‚  â”œâ”€ 4.1.2 Fig 4-5: ååº”æ—¶ä¸å­¦ä¹ æ›²çº¿ âœ…
â”‚  â””â”€ 4.1.3 ç½®ä¿¡åŒºé—´è®¡ç®— ğŸ”§ (è‡ªåŠ¨è¡¥å……)
...
```

---

## ä¸å›¾è¡¨åˆ†æçš„å¯¹ç­‰æ€§

| ç»´åº¦ | å›¾è¡¨åˆ†æ | å…¬å¼åˆ†æ | çŠ¶æ€ |
|-----|---------|---------|------|
| **é¢„æ‰«æ** | FigureScanner | EquationScanner | ğŸš§ å¾…å®ç° |
| **æ¸…å•æä¾›** | ä¼ ç»™Architect | ä¼ ç»™Architect | ğŸš§ å¾…å®ç° |
| **è¦†ç›–éªŒè¯** | validateå›¾è¡¨è¦†ç›– | validate_equation_coverage | ğŸš§ å¾…å®ç° |
| **ä¼˜å…ˆé—®é¢˜** | what + principle | what + principle | âœ… å·²å®ç° |
| **è‡ªåŠ¨è¡¥å…¨** | ç¼ºå¤±å›¾è¡¨è¡¥å……section | ç¼ºå¤±å…¬å¼è¡¥å……section | ğŸš§ å¾…å®ç° |
| **å­sectionç»“æ„** | 3.1.1 Fig 1 | 3.2.1 Eq 1 | âœ… å·²å®ç° |

---

## æ€»ç»“

é€šè¿‡å®æ–½æœ¬åè®®ï¼Œæˆ‘ä»¬å°†å®ç°ï¼š

1. âœ… **å®Œæ•´è¦†ç›–**: æ‰€æœ‰å…¬å¼ï¼ˆç¼–å·+æœªç¼–å·ï¼‰éƒ½è¢«è¯†åˆ«å’Œåˆ†æ
2. âœ… **ç»“æ„ç»Ÿä¸€**: å…¬å¼ä¸å›¾è¡¨æ‹¥æœ‰ç›¸åŒçš„å­sectionç»“æ„
3. âœ… **è´¨é‡ä¿è¯**: æ¯ä¸ªå…¬å¼sectionéƒ½æœ‰"æ˜¯ä»€ä¹ˆ+åŸç†"ä¼˜å…ˆé—®é¢˜
4. âœ… **è‡ªåŠ¨éªŒè¯**: ä¸‰å±‚éªŒè¯æœºåˆ¶ç¡®ä¿ä¸é—æ¼
5. âœ… **æ¸…æ™°è¾“å‡º**: æ§åˆ¶å°æ˜ç¡®æ˜¾ç¤ºå…¬å¼æ£€æµ‹å’Œè¦†ç›–æƒ…å†µ

**æ ¸å¿ƒæ€æƒ³**ï¼šä¸ä¾èµ–Architectçš„"ä¸»åŠ¨æ‰«æ"ï¼Œè€Œæ˜¯é€šè¿‡**ç‹¬ç«‹æ‰«æå™¨**é¢„å…ˆæå–å…¬å¼æ¸…å•ï¼Œç„¶å**å¼ºåˆ¶éªŒè¯**è¦†ç›–æƒ…å†µï¼Œå°±åƒå¤„ç†å›¾è¡¨ä¸€æ ·ã€‚
